<?xml version="1.0" encoding="UTF-8" ?>
    <prefix>
      <prefix>site</prefix>
      <describeURL>/direct/site/describe</describeURL>
      <summary>Represents a site (a collection of users and tools) in the Sakai system</summary>
      <collectionURL>/site</collectionURL>
      <collectionDescription>Retrieves the list of all sites that the current user can access. Supply a value for '_limit' to specify how many sites should be returned. Note that there is a system maximum that will override a specified value if it is larger than allowed. Supply a value for '_start' to page through results in multiple requests. For example, with 42 sites, requests with '_start' = 1, '_limit' = 50 and then '_start' = 51, '_limit' = 50 could be used to retrieve the first batch of 42 sites and the second being empty would signify the end of available results.</collectionDescription>
      <createURL>/site/new</createURL>
      <createDescription>Adding a site will always set the owner/created by to the current user unless 'owner' is set to a userId, the minimum to create a site is the id and the type, all other fields are optional</createDescription>
      <showURL>/site/:ID:</showURL>
      <showDescription>Allows viewing of data from a single site, use 'includeGroups' (boolean) to also get the groups data with the site</showDescription>
      <updateURL>/site/:ID:/edit</updateURL>
      <updateDescription>Can update all writeable fields in the site including owner</updateDescription>
      <deleteURL>/site/:ID:/delete</deleteURL>
      <customActions>
        <customAction>
          <action>role</action>
          <url>/direct/site/role</url>
          <method/>
          <viewKey/>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>pages</action>
          <url>/direct/site/:ID:/pages</url>
          <method>GET</method>
          <viewKey>show</viewKey>
          <description>Allows retrieval of all pages and tools in a site, use "props" (true/false, default false) to include page properties, use "config" (true/false, default false) to include tool configurations</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>setPerms</action>
          <url>/direct/site/:ID:/setPerms</url>
          <method>PUT</method>
          <viewKey>edit</viewKey>
          <description>Allows the setting of the permissions for the specified site by posting to the url /site/:SITEID:/setPerms. This is done by passing a set of post parameters where the key takes the form of 'ROLEID:FUNCTION' and the value is a boolean 'true' or 'false'. For example, passing the parameter 'maintain:blog.post.create=true' would switch the blog.post.create function on for the maintain role in the specified site.</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>exists</action>
          <url>/direct/site/:ID:/exists</url>
          <method>GET</method>
          <viewKey>show</viewKey>
          <description>Returns an empty 200 if the site exists, and a failure (possibly 404) if it does not. <br/> Note that you can also check this by simply using the show view of a site but that returns the site information as well so this is faster</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>groups</action>
          <url>/direct/site/groups</url>
          <method/>
          <viewKey/>
          <description>Allows access to the groups for a site using a url like: /site/siteId/groups. <br/> (GET) /direct/site/siteid/groups - gets metadata for groups but not membership.</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>perms</action>
          <url>/direct/site/:ID:/perms</url>
          <method>GET</method>
          <viewKey>show</viewKey>
          <description>Allows the retrieval of the permissions for the specified site using a url like /site/:SITEID:/perms[/:PREFIX].json, where PREFIX allows the caller to limit the returned permissions to a subset. For example, the url '/direct/site/XYZ/perms/calendar.json' would return the calendar permissions for each role in the site 'XYZ'. Missing the PREFIX off would result in the permissions for all the tools in the site being returned.</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>userPerms</action>
          <url>/direct/site/:ID:/userPerms</url>
          <method>GET</method>
          <viewKey>show</viewKey>
          <description>Allows the retrieval of the current user's permissions within the specified site using a url like /site/:SITEID:/userPerms[/:PREFIX], where PREFIX allows the caller to limit the returned permissions to a subset. For example, the url '/direct/site/XYZ/userPerms/calendar.json' would return the calendar permissions of the current user in the site 'XYZ'. Missing the PREFIX off would result in the permissions for all the tools in the site being returned.</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>withPerm</action>
          <url>/direct/site/withPerm</url>
          <method/>
          <viewKey/>
          <description>The URL for example, /site/withPerm/.json?permission=site.upd</description>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>info</action>
          <url>/direct/site/info</url>
          <method/>
          <viewKey/>
        </customAction>
      </customActions>
      <customActions>
        <customAction>
          <action>group</action>
          <url>/direct/site/group</url>
          <method/>
          <viewKey/>
          <description>Allows access to group information directly using a url like: /site/siteId/group/groupId For membership actions use the Membership Provider<br /> (GET) /direct/site/siteid/group/groupid - gets metadata for group but not membership. <br />(POST) /direct/site/siteid/group/groupid - updates metadata for group but not membership. <br />(PUT) /direct/site/siteid/group - create a new group in the site (returns group id). Parameters include title, description, optionally initial list of members. <br />(DELETE) /direct/site/siteid/group/groupid - delete an existing group in the site.</description>
        </customAction>
      </customActions>
      <outputFormats>
        <format>xml</format>
        <format>json</format>
        <format>html</format>
        <format>form</format>
       </outputFormats>
      <inputFormats>
        <format>html</format>
        <format>xml</format>
        <format>json</format>
       </inputFormats>
      <entityClass>
        <class>org.sakaiproject.entitybroker.providers.model.EntitySite</class>
        <type>bean</type>
        <fields>
          <field>
            <name>activeEdit</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>contactEmail</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>contactName</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>createdDate</name>
            <type>java.util.Date</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>createdTime</name>
            <type>org.sakaiproject.time.api.Time</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>customPageOrdered</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>description</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>empty</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>htmlDescription</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>htmlShortDescription</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>iconUrl</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>iconUrlFull</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>id</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>infoUrl</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>infoUrlFull</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>joinable</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>joinerRole</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>lastModified</name>
            <type>long</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>maintainRole</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>modifiedDate</name>
            <type>java.util.Date</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>modifiedTime</name>
            <type>org.sakaiproject.time.api.Time</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>owner</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
            <description>A userId, can be changed after a site is created but has no real effect if the contact info is set</description>
          </field>
          <field>
            <name>props</name>
            <type>java.util.Map</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>providerGroupId</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>pubView</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>published</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>realmLock</name>
            <type>org.sakaiproject.authz.api.AuthzGroup$RealmLockMode</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>realmLocks</name>
            <type>java.util.List</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>reference</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>shortDescription</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>siteGroups</name>
            <type>java.util.List</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>siteGroupsList</name>
            <type>java.util.List</type>
            <readable>false</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>siteOwner</name>
            <type>org.sakaiproject.entitybroker.providers.model.Owner</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>sitePages</name>
            <type>java.util.List</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>skin</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>softlyDeleted</name>
            <type>boolean</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>softlyDeletedDate</name>
            <type>java.util.Date</type>
            <readable>true</readable>
            <writeable>false</writeable>
          </field>
          <field>
            <name>title</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>type</name>
            <type>java.lang.String</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
          <field>
            <name>userRoles</name>
            <type>[Ljava.lang.String;</type>
            <readable>true</readable>
            <writeable>true</writeable>
          </field>
        </fields>
      </entityClass>
      <redirects>
        <redirect>
          <template>/{prefix}/{id}/memberships</template>
          <methodName>redirectMemberships</methodName>
          <description>Allows for retrieval of all memberships for a site by redirecting to the memberships entity provider</description>
          <controllable>false</controllable>
          <order>0</order>
        </redirect>
      </redirects>
      <capabilities>
        <capability>
          <name>CoreEntityProvider</name>
          <type>org.sakaiproject.entitybroker.entityprovider.CoreEntityProvider</type>
        </capability>
        <capability>
          <name>EntityProvider</name>
          <type>org.sakaiproject.entitybroker.entityprovider.EntityProvider</type>
        </capability>
        <capability>
          <name>ActionsExecutable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.ActionsExecutable</type>
        </capability>
        <capability>
          <name>CRUDable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.CRUDable</type>
        </capability>
        <capability>
          <name>CollectionResolvable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.CollectionResolvable</type>
        </capability>
        <capability>
          <name>Createable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Createable</type>
        </capability>
        <capability>
          <name>Deleteable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Deleteable</type>
        </capability>
        <capability>
          <name>DepthLimitable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.DepthLimitable</type>
        </capability>
        <capability>
          <name>Describeable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Describeable</type>
        </capability>
        <capability>
          <name>Inputable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Inputable</type>
        </capability>
        <capability>
          <name>Outputable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Outputable</type>
        </capability>
        <capability>
          <name>RESTful</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.RESTful</type>
        </capability>
        <capability>
          <name>Redirectable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Redirectable</type>
        </capability>
        <capability>
          <name>RequestStorable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.RequestStorable</type>
        </capability>
        <capability>
          <name>Resolvable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Resolvable</type>
        </capability>
        <capability>
          <name>Sampleable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Sampleable</type>
        </capability>
        <capability>
          <name>Saveable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Saveable</type>
        </capability>
        <capability>
          <name>Updateable</name>
          <type>org.sakaiproject.entitybroker.entityprovider.capabilities.Updateable</type>
          <description>The owner (a userId) value can now be changed once the site is created</description>
        </capability>
      </capabilities>
    </prefix>
